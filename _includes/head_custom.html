<!-- 검색 엔진 노출 제한 -->
<meta name="robots" content="noindex, nofollow">

<!-- Pretendard 폰트 -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css">

<!-- GitHub Markdown CSS (부분 적용) -->
<style>
  /* Pretendard 폰트 적용 */
  body, .main-content, .site-nav, .site-header {
    font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  }

  /* GitHub 스타일 코드 블록 */
  pre {
    background-color: #f6f8fa;
    border: 1px solid #d0d7de;
    border-radius: 6px;
    padding: 16px;
    overflow: auto;
  }

  code {
    background-color: #f6f8fa;
    padding: 0.2em 0.4em;
    border-radius: 3px;
    font-size: 85%;
  }

  pre code {
    background: none;
    padding: 0;
  }

  /* GitHub 스타일 표 */
  table {
    border-collapse: collapse;
    width: 100%;
  }

  th, td {
    border: 1px solid #d0d7de;
    padding: 8px 12px;
  }

  th {
    background-color: #f6f8fa;
    font-weight: 600;
  }

  tr:nth-child(even) {
    background-color: #f6f8fa;
  }

  /* GitHub 스타일 인용문 */
  blockquote {
    border-left: 4px solid #d0d7de;
    padding-left: 16px;
    color: #57606a;
    margin: 16px 0;
  }

  /* 이전/다음 네비게이션 스타일 */
  .nav-footer {
    display: flex;
    justify-content: space-between;
    padding: 20px 0;
    border-top: 1px solid #d0d7de;
    margin-top: 40px;
  }

  .nav-footer a {
    display: inline-flex;
    align-items: center;
    padding: 8px 16px;
    color: #0969da;
    text-decoration: none;
    border: 1px solid #d0d7de;
    border-radius: 6px;
    background: #f6f8fa;
    font-size: 14px;
  }

  .nav-footer a:hover {
    background: #0969da;
    color: white;
    border-color: #0969da;
  }

  .nav-footer .prev::before {
    content: "← ";
  }

  .nav-footer .next::after {
    content: " →";
  }

  .nav-footer .spacer {
    flex: 1;
  }
</style>

<!-- 이전/다음 네비게이션 생성 -->
<script>
  // window.onload로 모든 리소스 로드 후 실행
  window.addEventListener('load', function() {
    setTimeout(createPrevNextNav, 500);
  });

  function createPrevNextNav() {
    console.log('=== Prev/Next Nav Debug ===');

    // 이미 생성되었으면 스킵
    if (document.querySelector('.nav-footer')) {
      console.log('SKIP: nav-footer already exists');
      return;
    }

    // 사이드바에서 페이지 링크 수집 (여러 셀렉터 시도)
    var navLinks = [];
    var selectors = [
      '.site-nav .nav-list-item > a',
      '.nav-list-item > a',
      '.site-nav a'
    ];

    var linkElements = null;
    for (var i = 0; i < selectors.length; i++) {
      var found = document.querySelectorAll(selectors[i]);
      console.log('Selector:', selectors[i], '→ found:', found.length);
      if (found.length > 0 && !linkElements) {
        linkElements = found;
      }
    }

    if (!linkElements || linkElements.length === 0) {
      console.log('ERROR: No links found');
      return;
    }

    linkElements.forEach(function(link) {
      var href = link.getAttribute('href');
      var text = link.textContent.trim();
      var isActive = link.classList.contains('active');

      // 현재 페이지(active)는 href가 없으므로 현재 URL 사용
      if (isActive && !href) {
        href = window.location.pathname;
      }

      // 빈 링크, 앵커, 외부 링크, 인덱스 페이지(슬래시로 끝남) 제외
      if (href && text &&
          href.indexOf('#') !== 0 &&
          href.indexOf('http') !== 0 &&
          !href.match(/^javascript/) &&
          !href.endsWith('/')) {
        navLinks.push({ href: href, title: text });
      }
    });

    console.log('navLinks collected:', navLinks.length, navLinks.map(function(l) { return l.href; }));

    if (navLinks.length < 2) {
      console.log('ERROR: Not enough links (< 2)');
      return;
    }

    // 현재 페이지 찾기 (경로 정규화)
    var currentPath = window.location.pathname;
    var currentIndex = -1;
    console.log('currentPath:', currentPath);

    for (var i = 0; i < navLinks.length; i++) {
      var linkPath = navLinks[i].href;
      // 상대경로를 절대경로로 변환하여 비교
      var a = document.createElement('a');
      a.href = linkPath;
      if (a.pathname === currentPath) {
        currentIndex = i;
        console.log('MATCH at index:', i, a.pathname);
        break;
      }
    }

    if (currentIndex === -1) {
      console.log('ERROR: currentIndex not found');
      return;
    }

    // 네비게이션 생성
    var nav = document.createElement('nav');
    nav.className = 'nav-footer';

    // 이전 버튼
    if (currentIndex > 0) {
      var prev = navLinks[currentIndex - 1];
      var prevLink = document.createElement('a');
      prevLink.href = prev.href;
      prevLink.className = 'prev';
      prevLink.textContent = prev.title;
      nav.appendChild(prevLink);
      console.log('Prev button:', prev.title);
    } else {
      var span = document.createElement('span');
      nav.appendChild(span);
      console.log('No prev button (first page)');
    }

    // 스페이서
    var spacer = document.createElement('span');
    spacer.className = 'spacer';
    nav.appendChild(spacer);

    // 다음 버튼
    if (currentIndex < navLinks.length - 1) {
      var next = navLinks[currentIndex + 1];
      var nextLink = document.createElement('a');
      nextLink.href = next.href;
      nextLink.className = 'next';
      nextLink.textContent = next.title;
      nav.appendChild(nextLink);
      console.log('Next button:', next.title);
    } else {
      console.log('No next button (last page)');
    }

    // 메인 컨텐츠에 추가
    var mainContent = document.getElementById('main-content') ||
                      document.querySelector('.main-content') ||
                      document.querySelector('main') ||
                      document.querySelector('.main');
    console.log('mainContent:', mainContent ? 'FOUND' : 'NOT FOUND');

    if (mainContent) {
      mainContent.appendChild(nav);
      console.log('SUCCESS: nav-footer appended');
    } else {
      console.log('ERROR: mainContent not found');
    }
  }
</script>
