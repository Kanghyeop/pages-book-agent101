<!-- 검색 엔진 노출 제한 -->
<meta name="robots" content="noindex, nofollow">

<!-- GitHub Markdown CSS (부분 적용) -->
<style>
  /* GitHub 스타일 코드 블록 */
  pre {
    background-color: #f6f8fa;
    border: 1px solid #d0d7de;
    border-radius: 6px;
    padding: 16px;
    overflow: auto;
  }

  code {
    background-color: #f6f8fa;
    padding: 0.2em 0.4em;
    border-radius: 3px;
    font-size: 85%;
  }

  pre code {
    background: none;
    padding: 0;
  }

  /* GitHub 스타일 표 */
  table {
    border-collapse: collapse;
    width: 100%;
  }

  th, td {
    border: 1px solid #d0d7de;
    padding: 8px 12px;
  }

  th {
    background-color: #f6f8fa;
    font-weight: 600;
  }

  tr:nth-child(even) {
    background-color: #f6f8fa;
  }

  /* GitHub 스타일 인용문 */
  blockquote {
    border-left: 4px solid #d0d7de;
    padding-left: 16px;
    color: #57606a;
    margin: 16px 0;
  }

  /* 이전/다음 네비게이션 스타일 */
  .nav-footer {
    display: flex;
    justify-content: space-between;
    padding: 20px 0;
    border-top: 1px solid #d0d7de;
    margin-top: 40px;
  }

  .nav-footer a {
    display: inline-flex;
    align-items: center;
    padding: 8px 16px;
    color: #0969da;
    text-decoration: none;
    border: 1px solid #d0d7de;
    border-radius: 6px;
    background: #f6f8fa;
    font-size: 14px;
  }

  .nav-footer a:hover {
    background: #0969da;
    color: white;
    border-color: #0969da;
  }

  .nav-footer .prev::before {
    content: "← ";
  }

  .nav-footer .next::after {
    content: " →";
  }

  .nav-footer .spacer {
    flex: 1;
  }
</style>

<!-- Mermaid 다이어그램 지원 -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Mermaid 키워드로 시작하는 코드 블록 찾아서 변환
    var mermaidKeywords = ['flowchart', 'graph', 'sequenceDiagram', 'classDiagram',
                           'stateDiagram', 'erDiagram', 'gantt', 'pie', 'journey', 'gitGraph'];

    document.querySelectorAll('pre > code').forEach(function(code) {
      var text = code.textContent.trim();
      var isMermaid = mermaidKeywords.some(function(kw) {
        return text.startsWith(kw);
      });

      if (isMermaid) {
        var pre = code.parentNode;
        var container = pre.closest('.highlighter-rouge') || pre;
        var div = document.createElement('div');
        div.className = 'mermaid';
        div.textContent = text;
        container.parentNode.replaceChild(div, container);
      }
    });

    // Mermaid 초기화 및 렌더링
    mermaid.initialize({
      startOnLoad: false,
      theme: 'default'
    });
    mermaid.run();

    // 이전/다음 네비게이션 생성
    createPrevNextNav();
  });

  function createPrevNextNav() {
    // 사이드바에서 모든 네비게이션 링크 수집
    var navLinks = [];
    document.querySelectorAll('.nav-list-item a.nav-list-link').forEach(function(link) {
      navLinks.push({
        href: link.getAttribute('href'),
        title: link.textContent.trim()
      });
    });

    if (navLinks.length === 0) return;

    // 현재 페이지 찾기
    var currentPath = window.location.pathname;
    var currentIndex = -1;
    for (var i = 0; i < navLinks.length; i++) {
      if (navLinks[i].href === currentPath ||
          currentPath.endsWith(navLinks[i].href) ||
          navLinks[i].href.endsWith(currentPath.replace(/\/$/, ''))) {
        currentIndex = i;
        break;
      }
    }

    if (currentIndex === -1) return;

    // 네비게이션 요소 생성
    var nav = document.createElement('nav');
    nav.className = 'nav-footer';

    if (currentIndex > 0) {
      var prev = navLinks[currentIndex - 1];
      var prevLink = document.createElement('a');
      prevLink.href = prev.href;
      prevLink.className = 'prev';
      prevLink.textContent = prev.title;
      nav.appendChild(prevLink);
    } else {
      nav.appendChild(document.createElement('span'));
    }

    var spacer = document.createElement('span');
    spacer.className = 'spacer';
    nav.appendChild(spacer);

    if (currentIndex < navLinks.length - 1) {
      var next = navLinks[currentIndex + 1];
      var nextLink = document.createElement('a');
      nextLink.href = next.href;
      nextLink.className = 'next';
      nextLink.textContent = next.title;
      nav.appendChild(nextLink);
    }

    // 메인 컨텐츠 영역에 추가
    var mainContent = document.querySelector('.main-content') || document.querySelector('main') || document.body;
    mainContent.appendChild(nav);
  }
</script>
