---
title: "[v1] 지식 계층과 구조화"
nav_order: 4
parent: Part 4
---


# [v1] 지식 계층과 구조화: 데이터베이스에서 RAG까지

에이전트가 "아는 것"을 어떻게 저장하고 활용할까요? 이 챕터에서는 임베딩, 벡터 데이터베이스, RAG, GraphRAG까지 데이터를 다루는 핵심 개념을 살펴봅니다.

---

## 임베딩: 단어를 숫자로 바꾸기

### King - Man + Woman = ?

유명한 예시가 있습니다:

![임베딩 공간](/pages-book-agent101/assets/embedding-space.svg)

```
King - Man + Woman = Queen
```

어떻게 이런 계산이 가능할까요? 단어를 숫자 벡터로 변환하면 됩니다.

```
King  = [0.8, 0.2, 0.9, ...]  (수백 개의 숫자)
Man   = [0.7, 0.1, 0.3, ...]
Woman = [0.6, 0.3, 0.4, ...]
Queen = [0.7, 0.4, 1.0, ...]
```

이렇게 단어나 문장을 숫자 벡터로 변환하는 것을 임베딩(Embedding)이라고 합니다.

### 왜 임베딩이 필요한가?

컴퓨터는 "비슷하다"를 모릅니다. 하지만 숫자로 바꾸면 거리를 계산할 수 있습니다.

```
"서울 날씨 알려줘"와 비슷한 질문 찾기

텍스트 비교: 글자가 다르면 다른 문장
벡터 비교: 의미가 비슷하면 가까운 거리

"서울 날씨 알려줘" ↔ "오늘 서울 기온은?" → 거리 가까움
"서울 날씨 알려줘" ↔ "맛집 추천해줘" → 거리 멂
```

---

## 데이터베이스의 종류

데이터를 저장하는 방식은 여러 가지입니다.

![데이터베이스 종류](/pages-book-agent101/assets/db-types.svg)

### 1. 관계형 데이터베이스 (SQL)

엑셀처럼 행과 열로 정리된 테이블입니다.

```
[간호사 테이블]
ID | 이름   | 병동  | 입사일
1  | 김간호 | 내과  | 2020-03
2  | 이간호 | 외과  | 2021-05
```

특징: 정형화된 데이터, 정확한 검색 ("내과 소속 간호사 찾기")
대표: MySQL, PostgreSQL

### 2. 문서 데이터베이스 (NoSQL)

JSON처럼 유연한 구조입니다.

```json
{
  "id": 1,
  "name": "김간호",
  "병동": "내과",
  "skills": ["응급처치", "수술보조"],
  "notes": "야간 근무 선호"
}
```

특징: 유연한 구조, 빠른 읽기/쓰기
대표: MongoDB, DynamoDB

### 3. 그래프 데이터베이스

관계를 저장합니다.

```
(김간호) --[소속]--> (내과병동)
(김간호) --[담당]--> (환자A)
(환자A) --[처방]--> (약품X)
```

특징: 복잡한 관계 탐색에 강함
대표: Neo4j, Amazon Neptune

### 4. 벡터 데이터베이스

임베딩 벡터를 저장합니다.

```
문서1: [0.2, 0.8, 0.3, ...] → "간호사 번표 규칙"
문서2: [0.3, 0.7, 0.4, ...] → "근무 교대 원칙"
문서3: [0.9, 0.1, 0.2, ...] → "병원 식단표"
```

특징: "비슷한 것" 검색에 강함
대표: Pinecone, Chroma, Weaviate

---

## 벡터 DB vs 기존 DB

![DB 비교](/pages-book-agent101/assets/db-comparison.svg)

| 구분 | 기존 DB | 벡터 DB |
|------|---------|---------|
| 저장 형태 | 텍스트, 숫자 | 벡터 (숫자 배열) |
| 검색 방식 | 정확히 일치 | 유사도 계산 |
| 질문 예시 | "ID가 123인 것" | "이것과 비슷한 것" |
| 용도 | 정형 데이터 | 의미 검색 |

기존 DB는 "정확히 맞는 것"을 찾고, 벡터 DB는 "비슷한 것"을 찾습니다.

---

## RAG: 검색 + 생성

RAG는 Retrieval-Augmented Generation의 약자입니다. 검색(Retrieval)과 생성(Generation)을 결합합니다.

![RAG 흐름](/pages-book-agent101/assets/rag-flow.svg)

### 왜 RAG가 필요한가?

LLM의 한계:
- 학습 데이터 이후의 정보를 모름
- 회사 내부 문서를 모름
- 할루시네이션 (없는 정보를 만들어냄)

RAG의 해결책:
1. 질문이 들어오면
2. 관련 문서를 벡터 DB에서 검색
3. 검색된 문서와 함께 LLM에 전달
4. LLM이 문서를 참고해서 답변 생성

```
[RAG 동작 예시]

사용자: "우리 회사 연차 규정이 어떻게 되나요?"

1. 질문을 임베딩으로 변환
2. 벡터 DB에서 유사한 문서 검색 → "인사규정.pdf 3페이지"
3. LLM에게 전달: "다음 문서를 참고해서 답변해줘: [인사규정 내용]"
4. LLM: "우리 회사 연차는 입사 1년 후 15일이 부여되며..."
```

---

## GraphRAG: 관계까지 활용하기

RAG의 한계:
- 단순히 "비슷한 문서"만 찾음
- 문서 간의 관계를 모름
- 복잡한 질문에 약함

GraphRAG는 그래프 데이터베이스를 활용합니다.

![GraphRAG 구조](/pages-book-agent101/assets/graphrag-structure.svg)

```
[RAG vs GraphRAG]

질문: "김 부장이 담당하는 프로젝트의 예산은?"

RAG: "김 부장" 관련 문서 검색 → 관련 없는 문서도 섞임

GraphRAG:
1. "김 부장" 노드 찾기
2. "담당" 관계 따라가기 → "프로젝트A" 노드
3. "예산" 속성 조회 → "1억원"
```

### Ontology: 개념 간의 관계 정의

GraphRAG가 잘 동작하려면 Ontology가 필요합니다.

```
[간호사 번표 Ontology]

개념들:
- 간호사
- 병동
- 근무 타입 (낮/저녁/밤)
- 규칙

관계들:
- 간호사 → 소속 → 병동
- 간호사 → 수행 → 근무
- 규칙 → 제약 → 근무 배치
```

Ontology가 잘 정의되면:
- 시스템이 일관된 용어 사용
- 복잡한 질문도 정확하게 답변
- 새로운 데이터도 쉽게 통합

---

## 실제 사례: Palantir

Palantir는 대기업들과 이런 협업을 합니다:

**1. 데이터 통합**
- 회사의 모든 데이터를 연결
- ERP, CRM, 이메일, 문서... 전부 하나의 그래프로

**2. 지식 그래프 구축**
- "이 고객은 어떤 제품을 샀고, 어떤 직원이 담당하고, 어떤 이슈가 있었나?"
- 관계를 따라가며 인사이트 도출

**3. AI 에이전트 연결**
- 구축된 지식 그래프에 LLM 연결
- 복잡한 비즈니스 질문에 답변

이런 시스템이 구축되면:
- "작년에 A 고객과 비슷한 패턴의 고객 찾아줘"
- "이 제품 불량이 다른 제품에도 영향을 미칠까?"
- "이 프로젝트와 연관된 모든 리스크 요인은?"

같은 복잡한 질문이 가능해집니다.

---

## 정리

| 개념 | 역할 |
|------|------|
| 임베딩 | 텍스트 → 숫자 벡터 변환 |
| 벡터 DB | 임베딩 저장, 유사도 검색 |
| 그래프 DB | 관계 저장, 연결 탐색 |
| RAG | 검색 + LLM 생성 결합 |
| GraphRAG | 관계까지 활용한 고급 RAG |
| Ontology | 개념과 관계의 체계적 정의 |

다음 챕터에서는 이런 데이터베이스를 갖고있는 에이전트에게 새로운 툴을 쥐어주는 연결 계층인 "커넥터"를 살펴봅니다.

---

작성일: 2026-01-08
Chapter: Part 4, Chapter 4.4
키워드: 임베딩, 벡터 데이터베이스, RAG, GraphRAG, Ontology, Palantir

---
<!-- LLM Context Anchor -->
**핵심 요약**: 임베딩 = 텍스트를 숫자 벡터로 변환(King-Man+Woman=Queen). 벡터DB = "비슷한 것" 검색에 강함(Pinecone, Chroma). RAG = 검색(Retrieval)+생성(Generation) 결합, LLM 할루시네이션 해결. GraphRAG = 관계까지 활용하는 고급 RAG, Ontology로 개념 간 관계 정의. Palantir 사례: 모든 데이터를 지식 그래프로 연결 → 복잡한 비즈니스 질문 가능.

**키워드**: `임베딩` `벡터DB` `RAG` `GraphRAG` `Ontology` `Palantir`
